<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
<ngx-spinner type="ball-scale-multiple"></ngx-spinner>


<p-panel header="Services">
    <div class="row mb-3">
        <!-- Capacity Management -->
        <div class="col">

            <div class=" row ">
                <div class="col-3">
                    <label>Capacity Management: </label>
                </div>
                <div class="col-8 d-flex flex-wrap gap-3">
                    <div class="d-flex align-items-center">
                        <p-radioButton name="capacityManagement" value="CONSUMER" inputId="consumerCapacity"
                            [(ngModel)]="capacity" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                        <label for="consumerCapacity" class="ms-2 ">CONSUMER</label>
                    </div>

                    <div class="d-flex align-items-center">
                        <p-radioButton name="capacityManagement" value="SUPPLIER" inputId="supplierCapacity"
                            [(ngModel)]="capacity" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                        <label for="supplierCapacity" class="ms-2">SUPPLIER</label>
                    </div>

                    <div class="d-flex align-items-center">
                        <p-radioButton name="capacityManagement" value="NONE" inputId="noneCapacity"
                            [(ngModel)]="capacity" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                        <label for="noneCapacity" class="ms-2">NONE</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <!-- Car Park Information -->
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Car Park Information: </label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="carPark" value="CONSUMER" inputId="consumerCarPark"
                                [(ngModel)]="carpark" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="consumerCarPark" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="carPark" value="SUPPLIER" inputId="supplierCarPark"
                                [(ngModel)]="carpark" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierCarPark" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="carPark" value="NONE" inputId="noneCarPark"
                                [(ngModel)]="carpark" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="noneCarPark" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <!-- Customer/Contracts -->
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Customer/Contracts: </label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="costContr" value="CONSUMER" inputId="consumerCostContr"
                                [(ngModel)]="customer" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="consumerCostContr" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="costContr" value="SUPPLIER" inputId="supplierCostContr"
                                [(ngModel)]="customer" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierCostContr" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="costContr" value="NONE" inputId="noneCostContr"
                                [(ngModel)]="customer" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="noneCostContr" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Evopark visitor Management -->
    <div class="row mb-3">
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Evopark visitor Management:</label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="vManag" value="CONSUMER" inputId="consumerVManag"
                                [(ngModel)]="visitor" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' "></p-radioButton>
                            <label for="consumerVManag" class="ms-2" (click)="buildServices()">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="vManag" value="SUPPLIER" inputId="supplierVManag"
                                [(ngModel)]="visitor" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierVManag" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="vManag" value="NONE" inputId="noneVManag"
                                [(ngModel)]="visitor" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="noneVManag" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <!-- Online Authorization -->
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Online Authorization:</label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="onlineAuth" value="CONSUMER" inputId="consumerOnlineAuth"
                                [(ngModel)]="onlineAuth" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY'" (click)="buildServices()" ></p-radioButton>
                            <label for="consumerOnlineAuth" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="onlineAuth" value="SUPPLIER" inputId="supplierOnlineAuth"
                                [(ngModel)]="onlineAuth" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY'" (click)="buildServices()" ></p-radioButton>
                            <label for="supplierOnlineAuth" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="onlineAuth" value="NONE" inputId="noneOnlineAuth"
                                [(ngModel)]="onlineAuth" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY'" (click)="buildServices()" ></p-radioButton>
                            <label for="noneOnlineAuth" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Administration Management -->
    <div class="row mb-3">
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Product Administration Management:</label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="pam" value="CONSUMER" inputId="consumerPam"
                                [(ngModel)]="pam" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="consumerPam" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="pam" value="SUPPLIER" inputId="supplierPam"
                                [(ngModel)]="pam" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierPam" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="pam" value="NONE" inputId="nonePam"
                                [(ngModel)]="pam" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="nonePam" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <!-- Sales & Purchase -->
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Sales & Purchase: </label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="sales" value="CONSUMER" inputId="consumerSales"
                                [(ngModel)]="sales" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="consumerSales" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="sales" value="SUPPLIER" inputId="supplierSales"
                                [(ngModel)]="sales" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierSales" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="sales" value="NONE" inputId="noneSales"
                                [(ngModel)]="sales" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="noneSales" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Tariff Engine -->
    <div class="row mb-3">
        <div class="col">
            <div class="row">
                <div class="col-3">
                    <label>Tariff Engine: </label>
                </div>
                <div class="col-8">
                    <div class="d-flex flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <p-radioButton name="tariff" value="CONSUMER" inputId="consumerTariff"
                                [(ngModel)]="tariff" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="consumerTariff" class="ms-2">CONSUMER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="tariff" value="SUPPLIER" inputId="supplierTariff"
                                [(ngModel)]="tariff" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="supplierTariff" class="ms-2">SUPPLIER</label>
                        </div>

                        <div class="d-flex align-items-center">
                            <p-radioButton name="tariff" value="NONE" inputId="noneTariff"
                                [(ngModel)]="tariff" [disabled]="!userIsAdmin || connectionPoint.type=='FACILITY' " (click)="buildServices()"></p-radioButton>
                            <label for="noneTariff" class="ms-2">NONE</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-panel>
<div class="container" style="margin-top: 20px; margin-bottom: 20px;">

    <div class="row justify-content-center">
        <div class="col-auto" *ngIf="userIsAdmin && !updateMode">
    
            <button class="btn cancel" (click)="previous()">
                <svg cIcon [name]="'cilArrowThickLeft'" [title]="'cilArrowThickLeft'" size="xl"></svg>
                Previous
            </button>
        </div>
        <div class="col-auto" *ngIf="userIsAdmin">

            <button class="btn save" (click)="update()">
                <ng-container *ngIf="updateMode || (!updateMode &&((connectionPoint.type != 'FACILITY' && connectionPoint.type != 'ECONN_SERVER') || (connectionPoint.type == 'FACILITY' && withSensorApiKey)))" >
                    <svg cIcon [name]="'cilHistory'" [title]="'cilHistory'" size="xl"></svg>

                    Save</ng-container>
                <ng-container *ngIf="!updateMode && ((connectionPoint.type =='FACILITY'&&!this.withSensorApiKey) || connectionPoint.type =='ECONN_SERVER')">
                        <svg cIcon [name]="'cilArrowThickFromLeft'" [title]="'cilArrowThickFromLeft'" size="xl"></svg>
                    Next
                </ng-container>
            </button>
        </div>
     
        <div class="col-auto">
            <button class="btn cancel" routerLink="/connectionpoints">
                <svg cIcon [name]="'cilX'" [title]="'cilX'" size="xl"></svg>
                Cancel
            </button>
        </div>
    </div>
</div>